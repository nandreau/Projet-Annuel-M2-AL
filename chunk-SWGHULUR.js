import{U as d}from"./chunk-SDAJZUUB.js";var s=function(t){return t.ROLE_CLIENT="ROLE_CLIENT",t.ROLE_ARTISAN="ROLE_ARTISAN",t.ROLE_MODERATOR="ROLE_MODERATOR",t.ROLE_ADMIN="ROLE_ADMIN",t}(s||{});var R=(()=>{let a=class a{getPhaseProgress(e){var o,c;let r=(c=(o=e.tasks)==null?void 0:o.length)!=null?c:0;if(r===0)return 0;let n=e.tasks.filter(u=>u.done).length;return Math.round(n/r*100)}getChantierProgress(e){var o,c;let r=(c=(o=e.phases)==null?void 0:o.reduce((u,l)=>{var i;return u.concat((i=l.tasks)!=null?i:[])},[]))!=null?c:[];if(r.length===0)return 0;let n=r.filter(u=>u.done).length;return Math.round(n/r.length*100)}getTaskState(e){let r=new Date().toISOString().slice(0,10);return e.done?"Termin\xE9e":e.dueDate&&e.dueDate<r?"En retard":e.assignments&&e.assignments.length>0?"En cours":"\xC0 faire"}getTaskSeverity(e){switch(this.getTaskState(e)){case"Termin\xE9e":return"success";case"En retard":return"danger";case"En cours":return"warn";case"\xC0 faire":return"secondary";default:return"secondary"}}getPrioritySeverity(e){switch(e){case"Urgent":return"danger";case"Important":return"warn";case"Moyen":return"info";case"Faible":return"secondary";default:return"info"}}getStatusSeverity(e){switch(e){case"R\xE9solu":return"success";case"En cours":return"warn";case"Non r\xE9solu":return"danger";default:return"info"}}getCurrentUser(){let e=localStorage.getItem("currentUser");return e?JSON.parse(e):null}isAdmin(){var r;let e=this.getCurrentUser();return(r=e==null?void 0:e.roles.includes(s.ROLE_ADMIN))!=null?r:!1}isModeratorOrAdmin(){var n;let e=this.getCurrentUser(),r=(n=e==null?void 0:e.roles)!=null?n:[];return r.includes(s.ROLE_ADMIN)||r.includes(s.ROLE_MODERATOR)}isArtisanOrModeratorOrAdmin(){var n;let e=this.getCurrentUser(),r=(n=e==null?void 0:e.roles)!=null?n:[];return r.includes(s.ROLE_ADMIN)||r.includes(s.ROLE_MODERATOR)||r.includes(s.ROLE_ARTISAN)}};a.\u0275fac=function(r){return new(r||a)},a.\u0275prov=d({token:a,factory:a.\u0275fac,providedIn:"root"});let t=a;return t})();export{R as a};
