<p-dialog
  [(visible)]="visible"
  (onHide)="cancel.emit()"
  [header]="mode==='add'? addTitle : editTitle"
  [modal]="true"
  [style]="{ width: dialogWidth }"
  appendTo="body"
>
  <span class="p-text-secondary block mb-5">{{ subtitle }}</span>

  <ng-container *ngFor="let f of fields">
    <div class="flex gap-4 mb-3">
      <label class="w-6rem flex align-items-center">{{ f.label }}</label>

      <!-- text/email/password -->
      <input
        *ngIf="f.type==='text' || f.type==='email' || f.type==='password'"
        [type]="f.type"
        pInputText
        [(ngModel)]="model[f.key]"
        [placeholder]="f.placeholder"
        class="w-full"
      />

      <!-- multiselect -->
      <p-multiSelect
        *ngIf="f.type==='multiselect'"
        [options]="f.options"
        [(ngModel)]="model[f.key]"
        [optionLabel]="optionLabelKey"
        display="chip"
        [placeholder]="f.placeholder"
        class="w-full"
        appendTo="body"
      ></p-multiSelect>

      <!-- chips -->
      <p-chips
        *ngIf="f.type==='chips'"
        [(ngModel)]="model[f.key]"
        [placeholder]="f.placeholder"
        [separator]="separator"
        class="w-full"
      ></p-chips>

      <!-- date -->
      <p-datePicker
        *ngIf="f.type==='date'"
        class="w-full"
        [(ngModel)]="model[f.key]"
        dateFormat="dd/mm/yy"
        showIcon
        appendTo="body"
      ></p-datePicker>

      <!-- select -->
      <p-dropdown
        *ngIf="f.type === 'select'"
        filter
        [options]="f.options"
        [(ngModel)]="model[f.key]"
        [optionLabel]="f.optionLabel"
        [optionValue]="f.optionValue"
        [placeholder]="f.placeholder"
        class="w-full"
        appendTo="body"
      />
    </div>
  </ng-container>

  <div class="flex justify-content-end gap-2 mt-2">
    <p-button label="Annuler" severity="secondary" (click)="cancel.emit()"/>
    <p-button
      [label]="mode==='add'? addButtonLabel : editButtonLabel"
      (click)="confirm.emit(model)"
    />
  </div>
</p-dialog>